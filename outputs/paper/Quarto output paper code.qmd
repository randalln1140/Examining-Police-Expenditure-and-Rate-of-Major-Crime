---
title: "Investigating Relationship Between Police Expenditure and Reported Crime Rate"
date: "1 Feburary 2022"
date-format: long
author: "Randall Ni"
abstract: "The debate of wether or not to cut police funding has gone on for ages. the propagators feared police brutalities due to the constant news portrayal, while others have argued that police activity should be required to ensure people's safety. Recent news of violent crimes such as the stabbings in some of the TTC stations have highlighted the urgency of this issue; the topic of this debate is more relevant to us than we think. We can use data to settle this debate once in and for all, and they are critical for understanding the correlations between police expenditure and the number of solved reported crimes. (write smthing you found in graphs later)"
format: pdf
bibliography: references.bib
---

## 1. Introduction
The Toronto police force ensures the safety of around 2965710 civilians daily, and their presence can deter some degrees of blatant criminal activities (Guz 2022). However, being civil servants, the Toronto police department requires funding to continue their daily operations. In 2022, the total police budget went up to approximately 1.1 billion dollars, which takes up around 7% of the entire city's operating cost (Jones 2022). This is not only in Toronto, major cities such as Montreal, Vancouver, and Calgary all have police expenses that take up a large portion of their city's budget. The question of whether we should give the police that much resources was always looming, and the death of George Flyod made this issue a hot topic. This event has also sparked the movement of "defunding the police". Although it began in the United States of America, it slowly migrated to Canadian cities as well. Critics have questioned the enormous amount of resources that the police force was using and argued that the resource (money) should be placed elsewhere such as community initiatives. One of the proponents mentioned that they "don't have a good sense of what the police do with the money we give them", and they questioned the efficiency of police work (Jones 2022). Although the debate surrounding this issue is heated, a lot of people are basing their opinions purely on what they saw in the news or on social media platforms. Therefore, it is imperative that we use data to support certain claims and prevent possible misleading information shown on our screens. 
Data sets regarding police expenditure and reported crimes rate are extremely important in order to understand the potential correlations between the two elements. There are some very interesting factors that we can examine to determine if some of the issues raised in the "defund the police" movement are justified. Since reported crimes get documented regardless of the police solving them, we can easily get the percentage of solved crimes; the percentage indicates that the police force allocated enough expense and manpower and gave the victims a satisfying result. The analysis of these elements will surely settle or support some of the concerns raised by proponents of the "defund the police" movement.
In this paper, I will try to analyse the connections between police expenditure and the percentage of crimes cleared based on different types of offense in order to answer the question of whether the police should get less funding or not. More specifically, I will first investigate the trend of police expenditure and how they fluctuate between 2014-2019. Next, I would take a look at overall reported crime within that time frame in order to determine if there are any outside influences. Lastly, I would compare the percentage and expenditure data separated by unique division numbers to address the efficiency questions of police stations. This analysis will be performed in R (R Core Team 2021), using the dplyr (Wickham et al. 2021), knitr (Xie 2021b), janitor (Firke 2021), scales [@scale] and tidyverse (Wickham et al. 2019) packages. All figures in the report are generated using ggplot2 (Wickham 2016) and tables are created with knitr (Xie 2021b). 

## 2. Data
### 2.1 Data Collection Method and Possible Bias/ Flaws
This analysis report will be using two data sets: "police annual statistical report reported crimes" and "police annual statistical report gross expenditures by division", and they were all obtained from opendatatoronto's open data portal. I accessed the raw data sets using the opendatatoronto package (Gelfand 2020) and saved them in the input/data file. Both data sets are a part of the police annual statistical (provided by the Toronto Police Department) report from 2014 to 2019, and they were last refreshed on November 18th, 2022.
There are some factors that those two data sets cannot address. For example, due to the Municipal Freedom of Information and Protection of Privacy Act, the police cannot disclose locations of the crime and personal information about the crime. Therefore, using the reported crimes data won't answer questions surrounding police brutality on minorities. Furthermore, the police expenditure data set also suffers from a lack of information. We can only obtain the overall expenditure of divisions separated by year; however, that does not tell us how much percentage of the expenditure actually went into crime solving. Although the above evidences mean that the attributes given does not translate into a clear answer that solves the argument completely, the remaining data on those two data sets could still produce a relatively sufficient graph and gain us more insight for our proposed correlation.

### 2.2 Police Expenditure Data
To begin with, I will first take a look at the police expenditure data. This raw data set contains 128 observations and seven variables. Due to the ease of analysis, I have also used the mutate function in the dplyr package (Wickham et al. 2021) to create a new column for the variable "gross_expenditure_final" called "expense_amount". I got rid of the dollar sign and commas present in the previous column for ease of graphing and made the values in the column switch from "character" to "numeric". Extract of the cleaned data set is shown below (Table 1). 
```{r}
##Load Library
library(opendatatoronto)
library(tidyverse)
library(janitor)
library(knitr)
library(scales)

##Read Data Sets
reported_crimes_data <-
  read_csv(here::here("inputs/data/reported_crimes_data.csv"), show_col_types = FALSE)
police_expenditure_data <-
  read_csv(here::here("inputs/data/police_expenditure_data.csv"), show_col_types = FALSE)

##Clean Police Expenditure Data
police_expenditure_data <-
  clean_names(police_expenditure_data)

##Need to create new column since old one isn't numeric
police_expenditure_data <-
  police_expenditure_data |>
  mutate(expense_amount = gsub("\\$","", police_expenditure_data$gross_expenditure_final))

police_expenditure_data$expense_amount <- as.numeric(gsub(",","",police_expenditure_data$expense_amount)) |> as.numeric()

##Create a table 
knitr::kable(head(police_expenditure_data), "pipe", align = "lcclllcr", caption = "Table 1: Extracting First Six Rows form the Edited Version of Police Expenditure Data")
```

The three most valuable variables shown with the above table are year, division (where the police station was stationed), and expense amount. These variable will yield interesting insight regarding this debate, since we can see the total amount of each division's expenses and the fluctuation of them from 2014 to 2019. I am interested to see the general trend of police expenses throughout the years, and we can examine specific divisions' efficiency using this data.
```{r}
##Line Graph for Police Expenditure Data
  ggplot(police_expenditure_data, 
         aes(x = year,
             y = expense_amount,
             col = division)) + 
    geom_point() + geom_line() + labs(x = "Year", y = "Expense Amount ($)", title = "Total Annual Expense for Each Police Division", col = "Divisions") + theme_minimal() + theme(plot.title = element_text(face="bold")) + scale_y_continuous(labels = comma) + labs(caption="Figure 1: Expenses for Each Division Seperated by Year")
```

I have used the scale package [@scale] to clean up my y-axis, so it shows numbers instead of staying in a log format; this allows us to more easily identify trends and learn how much actual money police stations are spending. In figure 1 above, we can easily see that police divisions' annual expenses are astronomical from the year of 2014 to 2021. However, there is no uniformed trend amongst those divisions; around half (8) of the divisions experienced an expense increase, while the rest either have no significant expense changes or have decreased their spendings. Division 54 & 55 is an outlier in this case, since the data set originally combined their expenses; after division 54 joined 55, the spending has reduced dramatically. For the convenience of the analysis, I will be examining the police divisions that have increased their spending in order to see whether more spending equates to a more efficient rate of solving crimes. In this case, division 14, 51, 52, and 43 all showed a steady increase in their expenses between 2014 to 2021; I will filter their data out in the next section for more specific analysis.

### 2.3 Reported Crimes Data
In order to make the observations above into analysis, we must also take into the account of the efficiency of the police. While a lot of data sets can show the number of incidents occurred during specific years, the data set I will be using shows the number of cases cleared (solved) as well. This allows us to gain more insight in the overall ability of the police. It is reasonable to argue that having only the amount of cases reported or having the amount of cases cleared is useless, since we cannot determine how well the police do their job and protect their people from malicious acts. Examining the total amount of reported crimes can especially be misleading. Police force is not God, therefore they cannot totally prevent the crimes from happening. The best thing they can do is to bring the perpetrator down with the force of law after crimes have been committed. Furthermore, by only examining the total number of cases, they can be easily influenced by outside forces that are unpredictable such as Covid-19 pandemic. Extract of the cleaned original reported crimes data set is shown below (Table 2).

```{r}
##Clean Data for Reported Crimes Data
reported_crimes_data <-
  clean_names(reported_crimes_data)
##Clear Rows with Nas 
reported_crimes_data <-
  na.omit(reported_crimes_data)

##Create a table 
knitr::kable(head(reported_crimes_data), "pipe", align = "lcccllcr", caption = "Table 2: Extracting First Six Rows form the Original Version of Reported Crimes Data", col.names = c("ID","Object ID", "Reported Year", "Division Responsible", "Category", "Subtype", "Cases Count", "Solved Cases"))

```
Table 2's data is very descriptive; however, we won't be needing the specific subtypes of crime categories and they are out of scope. Therefore, I created a new table that adds up each individual subtype within their main category. Furthermore, I also calculated the percentage of each division's success rate in solving crimes in each category. Extract of the cleaned, edited version of the reported crimes data set is shown below (Table 3).

```{r}
## Edited Version of Reported Crime Data (collapsed subtypes and added percentage cleared)
options(dplyr.summarise.inform = FALSE)
edited_reported_crimes_data <-
reported_crimes_data |>
  group_by(category, reported_year, geo_division) |>
  summarise(num_category = sum(as.numeric(count)), 
            num_category_cleared = sum(as.numeric(count_cleared)))|>
  mutate(percentage = num_category_cleared/ num_category *100)

##Create a table 
knitr::kable(head(edited_reported_crimes_data), "pipe", align = "lccccr", caption = "Table 3: Extracting First Six Rows form the Edited Version of Reported Crimes Data", col.names = c("Category of Crime","Reported Year", "Division Responsible", "Cases Count", "Solved Cases", "Solved Percentage"))
```
Table 3 above gives us a clearer idea of the data set and weeded out unnecessary variables such as "Object ID" and "Subtype". The four specific variables that I wanted are "Category of Crime", "Reported Year", "Division Responsible", and "Solved Percentage". Before we dive into the specific division's efficiency by comparing their expenses and "Solved Percentage", we must first take a look at the overall amount of crime reported and see if there are any anomalies or outliers. 










## Reference List